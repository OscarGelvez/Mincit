$scope.updateEmpresaT=function(){
console.log("llego update1 empTuristica")
$scope.hayCambios=false;

if($scope.EmpEdit.clasif_cliente!=$scope.EmpOriginal.clasif_cliente){
  $scope.hayCambios=true;
}

if($scope.contactoEdit.cc_contacto!=$scope.contactoOriginal.cc_contacto){
  $scope.hayCambios=true;
}
if($scope.contactoEdit.nombre_cont!=$scope.contactoOriginal.nombre_cont){
  $scope.hayCambios=true;
}
if($scope.contactoEdit.apellido_cont!=$scope.contactoOriginal.apellido_cont){
  $scope.hayCambios=true;
}
if($scope.contactoEdit.cargo_cont!= $scope.contactoOriginal.cargo_cont){
  $scope.hayCambios=true;
}
if($scope.contactoEdit.fecha_ingreso_cargo!= $scope.contactoOriginal.fecha_ingreso_cargo){
  $scope.hayCambios=true;
}
if($scope.contactoEdit.fecha_nacimiento!= $scope.contactoOriginal.fecha_nacimiento){
  $scope.hayCambios=true;
}
if($scope.contactoEdit.lugar_nacimiento!= $scope.contactoOriginal.lugar_nacimiento){
  $scope.hayCambios=true;
}
if($scope.contactoEdit.nivel_estudio!= $scope.contactoOriginal.nivel_estudio){
  $scope.hayCambios=true;
}
if($scope.contactoEdit.direccion!= $scope.contactoOriginal.direccion){
  $scope.hayCambios=true;
}
if($scope.contactoEdit.tel_fijo!= $scope.contactoOriginal.tel_fijo){
  $scope.hayCambios=true;
}
if($scope.contactoEdit.tel_cel!= $scope.contactoOriginal.tel_cel){
  $scope.hayCambios=true;
}
if($scope.contactoEdit.departamento!= $scope.contactoOriginal.departamento){
  $scope.hayCambios=true;
}
if($scope.contactoEdit.ciudad!= $scope.contactoOriginal.ciudad){
  $scope.hayCambios=true;
}
if($scope.contactoEdit.genero!= $scope.contactoOriginal.genero){
  $scope.hayCambios=true;
}
if($scope.contactoEdit.correo!= $scope.contactoOriginal.correo){
  $scope.hayCambios=true;
}
if($scope.contactoEdit.etnia!= $scope.contactoOriginal.etnia){
  $scope.hayCambios=true;
}
if($scope.contactoEdit.desplazado!= $scope.contactoOriginal.desplazado){
  $scope.hayCambios=true;
}
if($scope.contactoEdit.discapacidad!= $scope.contactoOriginal.discapacidad){
  $scope.hayCambios=true;
}




if($scope.EmpEdit.nombre_empresa!=$scope.EmpOriginal.nombre_empresa){
  $scope.hayCambios=true;
}
if($scope.EmpEdit.nit!=$scope.EmpOriginal.nit){
  $scope.hayCambios=true;
}

if($scope.EmpEdit.nombre_rep_legal!=$scope.EmpOriginal.nombre_rep_legal){
  $scope.hayCambios=true;
}
if($scope.EmpEdit.tipo_constitucion!=$scope.EmpOriginal.tipo_constitucion){
  $scope.hayCambios=true;
}
if($scope.EmpEdit.fecha_const_legal!=$scope.EmpOriginal.fecha_const_legal){
  $scope.hayCambios=true;
}
if($scope.EmpEdit.no_emple_tc!=$scope.EmpOriginal.no_emple_tc){
  $scope.hayCambios=true;
}
if($scope.EmpEdit.no_emple_mt!=$scope.EmpOriginal.no_emple_mt){
  $scope.hayCambios=true;
}
if($scope.EmpEdit.no_emple_directo!=$scope.EmpOriginal.no_emple_directo){
  $scope.hayCambios=true;
}
if($scope.EmpEdit.no_emple_indirecto!=$scope.EmpOriginal.no_emple_indirecto){
  $scope.hayCambios=true;
}
if($scope.EmpEdit.direccion!=$scope.EmpOriginal.direccion){
  $scope.hayCambios=true;
}
if($scope.EmpEdit.ciudad!=$scope.EmpOriginal.ciudad){
  $scope.hayCambios=true;
}
if($scope.EmpEdit.departamento!=$scope.EmpOriginal.departamento){
  $scope.hayCambios=true;
}
if($scope.EmpEdit.telefonoF!=$scope.EmpOriginal.telefonoF){
  $scope.hayCambios=true;
}
if($scope.EmpEdit.telefonoC!=$scope.EmpOriginal.telefonoC){
  $scope.hayCambios=true;
}
if($scope.EmpEdit.correo!=$scope.EmpOriginal.correo){
  $scope.hayCambios=true;
}
if($scope.EmpEdit.url_sitio_web!=$scope.EmpOriginal.url_sitio_web){
  $scope.hayCambios=true;
}
if($scope.EmpEdit.registro_mercantil!=$scope.EmpOriginal.registro_mercantil){
  $scope.hayCambios=true;
}
if($scope.EmpEdit.numero_registro_mercantil!=$scope.EmpOriginal.numero_registro_mercantil){
  $scope.hayCambios=true;
}
if($scope.EmpEdit.renov_mercantil!=$scope.EmpOriginal.renov_mercantil){
  $scope.hayCambios=true;
}
if($scope.EmpEdit.servicios_ofrecidos!=$scope.EmpOriginal.servicios_ofrecidos){
  $scope.hayCambios=true;
}
if($scope.EmpEdit.observaciones!=$scope.EmpOriginal.observaciones){
  $scope.hayCambios=true;
}





if($scope.EmpEditTuristica.cc_extranj_opc!=$scope.EmpOriginalTuristica.cc_extranj_opc){
  $scope.hayCambios=true;
}

if($scope.EmpEditTuristica.certif_sostenib!=$scope.EmpOriginalTuristica.certif_sostenib){
  $scope.hayCambios=true;
}

if($scope.EmpEditTuristica.cod_etica!=$scope.EmpOriginalTuristica.cod_etica){
  $scope.hayCambios=true;
}

if($scope.EmpEditTuristica.grupo_etnico_empr!=$scope.EmpOriginalTuristica.grupo_etnico_empr){
  $scope.hayCambios=true;
}

if($scope.EmpEditTuristica.impto_turismo!=$scope.EmpOriginalTuristica.impto_turismo){
  $scope.hayCambios=true;
}

if($scope.EmpEditTuristica.libro_migrac_col!=$scope.EmpOriginalTuristica.libro_migrac_col){
  $scope.hayCambios=true;
}


if($scope.EmpEditTuristica.num_seguro!=$scope.EmpOriginalTuristica.num_seguro){
  $scope.hayCambios=true;
}

if($scope.EmpEditTuristica.poliza_turistica!=$scope.EmpOriginalTuristica.poliza_turistica){
  $scope.hayCambios=true;
}

if($scope.EmpEditTuristica.reg_export_servicios!=$scope.EmpOriginalTuristica.reg_export_servicios){
  $scope.hayCambios=true;
}

if($scope.EmpEditTuristica.reg_nal_turismo!=$scope.EmpOriginalTuristica.reg_nal_turismo){
  $scope.hayCambios=true;
}

if($scope.EmpEditTuristica.tipo_activ_turistica!=$scope.EmpOriginalTuristica.tipo_activ_turistica){
  $scope.hayCambios=true;
}

if($scope.EmpEditTuristica.tipo_alojamiento!=$scope.EmpOriginalTuristica.tipo_alojamiento){
  $scope.hayCambios=true;
}

if($scope.EmpEditTuristica.turismo_desarrolla!=$scope.EmpOriginalTuristica.turismo_desarrolla){
  $scope.hayCambios=true;
}



   $scope.subirLogo(); 
 
}







$('#logo').bind('change', function() {
  alert("brinco 2")
 $scope.tam=(this.files[0].size)/1000;
});

$('#logo').bind('change', function() {
$scope.aux=this.files[0].type;
$scope.tipo=$scope.aux.split("/");
  if($scope.tipo[1]=="jpeg"){
      $scope.tipo[1]="jpg";
    }
  console.log("tipo "+$scope.tipo[1]);
$scope.hayCambioLogo=true;
  
});

$scope.subirLogo=function(){

  if($scope.tam>100){
      swal({
          title: 'Error Peso Exedido',
          text: 'El peso de la imagen seleccionada supera los 100KB',
          type: 'warning',
         timer: 2000
        })  
        return false;     
    }else{
      
        var name = $scope.EmpEdit.nombre_empresa
        var file = $scope.file;
        
        upload.uploadFile(file, name).then(function(res)
        {
          console.log(res);
          if(res.data==1){
            console.log("es 1. salio bien");
            console.log("La ruta de la img es: "+name+"."+$scope.tipo[1])
            $scope.urlLogo=name+"."+$scope.tipo[1];
            $scope.updateEmpresaT2(true);
          }else{

            $scope.urlLogo="nologo.jpg";
            $scope.updateEmpresaT2(false);

            console.log("es 0. Algo salio mal o No desea subir logo");
          }

        })
     return true;
    }
    
}







$scope.updateEmpresaT2=function(hayLogo){

if(!hayLogo){
  $scope.urlLogo=$scope.EmpEdit.url_logo;
}

//Para controlar que no vaya a cambiar su nit por otro de alguna empresa q ya existe y lo permita el sistema.
//Al mandar si, en php valido q no haya otra emp con ese nit. si mando no. en php no valido eso. 
  if($scope.EmpEdit.nit!=$scope.EmpOriginal.nit){
     $scope.modificoNit="si";
  }else{
     $scope.modificoNit="no"
  }

if($scope.hayCambios){
usSpinnerService.spin('spinner-1');
$http.post('Modelo/servicesMincit/Asesor/actualizarEmpresaT.php', {
          
clasificacion: $scope.EmpEdit.clasif_cliente,
cedula: $scope.contactoEdit.cc_contacto,
nombres: $scope.contactoEdit.nombre_cont,
apellidos: $scope.contactoEdit.apellido_cont,
cargo: $scope.contactoEdit.cargo_cont,
antiguedadCargo: $scope.contactoEdit.fecha_ingreso_cargo,
fechaNacimiento: $scope.contactoEdit.fecha_nacimiento,
lugarNacimiento: $scope.contactoEdit.lugar_nacimiento,
nivelEstudios: $scope.contactoEdit.nivel_estudio,
direccion: $scope.contactoEdit.direccion,
telefonoF: $scope.contactoEdit.tel_fijo,
telefonoC: $scope.contactoEdit.tel_cel,
departamento: $scope.contactoEdit.departamento,
ciudad: $scope.contactoEdit.ciudad,
genero: $scope.contactoEdit.genero,
 correo: $scope.contactoEdit.correo,
grupoEtnico: $scope.contactoEdit.etnia,
condicionDesplazamiento: $scope.contactoEdit.desplazado,
discapacidad: $scope.contactoEdit.discapacidad,

nombreE: $scope.EmpEdit.nombre_empresa,
nit: $scope.EmpEdit.nit,
nombreR: $scope.EmpEdit.nombre_rep_legal,
constitucion: $scope.EmpEdit.tipo_constitucion,
fechaC: $scope.EmpEdit.fecha_const_legal,
tc: $scope.EmpEdit.no_emple_tc,
mt: $scope.EmpEdit.no_emple_mt,
directos: $scope.EmpEdit.no_emple_directo,
indirectos: $scope.EmpEdit.no_emple_indirecto,
direccionEm: $scope.EmpEdit.direccion,
ciudadEm: $scope.EmpEdit.ciudad,
dptoEm: $scope.EmpEdit.departamento,
telefonoFijo: $scope.EmpEdit.telefonoF,
telefonoCelular: $scope.EmpEdit.telefonoC,
correoEm: $scope.EmpEdit.correo,
sitioWeb: $scope.EmpEdit.url_sitio_web,
registroM: $scope.EmpEdit.registro_mercantil,
numRegistro: $scope.EmpEdit.numero_registro_mercantil,
anoRenova: $scope.EmpEdit.renov_mercantil,
serviciosEmpre: $scope.EmpEdit.servicios_ofrecidos,
observaciones: $scope.EmpEdit.observaciones,
url_logo: $scope.urlLogo,



ccExtra:$scope.EmpEditTuristica.cc_extranj_opc,
sostenibilidad:$scope.EmpEditTuristica.certif_sostenib,
codEtica:$scope.EmpEditTuristica.cod_etica,
grupoEtnico:$scope.EmpEditTuristica.grupo_etnico_empr,
imptoTurismo:$scope.EmpEditTuristica.impto_turismo,
libroMigrac:$scope.EmpEditTuristica.libro_migrac_col,
numSeguro:$scope.EmpEditTuristica.num_seguro,
poliza:$scope.EmpEditTuristica.poliza_turistica,
exportaServicios:$scope.EmpEditTuristica.reg_export_servicios,
regNalTurismo:$scope.EmpEditTuristica.reg_nal_turismo,
tipoActTuristica:$scope.EmpEditTuristica.tipo_activ_turistica,
alojamiento:$scope.EmpEditTuristica.tipo_alojamiento,
turismoDesarrolla:$scope.EmpEditTuristica.turismo_desarrolla,


modificoNit: $scope.modificoNit

                           
               
        }
    ).success(function (data) {
      usSpinnerService.stop('spinner-1');
      if(data==1){
          swal({
          title: 'Exito',
          text: "La empresa se modificó exitosamente",
          type: 'success',         
          confirmButtonColor: '#388E3C'          
          }).then(function() {
           
          location.reload();
        })
      
      }else{
        

        if(data==2){
        swal(
            'Error',
           'La empresa no fue modificada, Vuelva a intentarlo',
            'error'
           );
          }
       
     }
        console.log(data);    

    }).error(function(err){
      usSpinnerService.stop('spinner-1');
        console.log(err);

    }); 
} else{
  swal(
            'AVISO',
           'No se detectaron cambios en los datos.',
            'info'
           );
          }
}